language: rust
sudo: required
mono: none
dist: xenial
rust:
  - stable
os:
  - linux
branches:
  only:
    - master
cache:
  directories:
    - $HOME/.rustup/
    - $HOME/.cargo/
addons:
  apt:
    packages:
      - libcurl4-openssl-dev
      - libelf-dev
      - libdw-dev
      - binutils-dev
      - cmake # also required for cargo-update
    sources:
      - kalakris-cmake
install:
  - cargo -V
script:
  - cargo test --all-features
  - cargo install cargo-update || echo "cargo-update already installed"
  - cargo install cargo-travis-fork || echo "cargo-travis already installed"
  - cargo install-update -a # update outdated cached binaries
  - cargo coveralls
